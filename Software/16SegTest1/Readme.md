# 16 Segment 9 Digit Display Controller HID Control Software
このソフトウエアは 16 Segment 9 Digit Display Controller V2.0 をHID経由で制御するためのサンプルソフトウエアです。
## 必要なソフトウエア
ｰ　Visual Studio 2017 (Community Edition可) Ver 15.8.0にて検証
## ビルド方法
本サンプルソフトウエアは外部ライブラリを使用していますが、同梱はされていないため別途ライブラリをダウンロードする必要があります。

ダウンロード方法は、本ディレクトリにあるソリューションファイルを開いた後にメニューバーから[ツール]=>[NuGet パッケージマネージャー]=>[パッケージマネージャー コンソール]を開きます。

「このソリューションに一部のNuGetパッケージが見つかりません。クリックするとオンラインパッケージ ソースから復元します」というメッセージの横にある[復元]ボタンをクリックすると復元されます。
表示されない場合、 PM> というプロンプトの後に以下のように入力します。

```
Update-Package -Reinstall
```

上記のコマンドを実行することにより、パッケージがダウンロードされます。
パッケージをインストール後にビルドを行い、正常にビルドできれば成功です。

## JSONの書き方について
文字以外のカスタムフォントを指定する際には、1桁ごとの「カスタムフォント」と表示する順番を制御する「セグメントデータ」をJSONファイルにて記述する必要があります。サンプルについては[JSON_Sample]フォルダに用意してありますが、おおよその記述方法を記載します。
## カスタムフォントの定義
カスタムフォントは"A1"～"DP"まで、bool型で定義します。各要素の"A1"や"DP"などは、16 Segment 9 Digit Display背面の右下の物と対応しています。
## セグメントデータの定義
セグメントデータは"BaseDir"と"Fonts"を定義します。

"BaseDir"にはカスタムフォントファイルがあるフォルダパスを記述してください。記述がない、若しくは要素が空文字の場合にはプログラムを実行した際の作業ディレクトリが自動的に指定されます。

"Fonts"にはカスタムフォントを定義するため、作成したカスタムフォントのJSONファイル名を指定します。要素は上の方が若番になっていますが、以下にサンプルを示します。

```JSON
{
  "BaseDir": "C:\Users\Hoge\16Seg",
  "Fonts": [
    "font_test.json", // 1桁目
    "font_test.json", // 2桁目
    "font_test.json", // 3桁目
    "font_test.json", // 4桁目
    "font_test.json", // 5桁目
    "font_test.json", // 6桁目
    "font_test.json", // 7桁目
    "font_test.json", // 8桁目
    "font_test.json", // 9桁目
    // ....
  ]
}
```

なお、カスタムフォント jsonファイルが存在しない場合、ロード時にエラーが出るようになっています。その際、エラーメッセージにプログラム側が読み込もうとしたパスが表示されますので、"BaseDir"などの記述を確認してください。